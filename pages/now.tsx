import { NextPage } from "next";
import Image from "next/image";
import { getNow } from "lib/notion";

type NowPage = {
  coverUrl: string;
  entries: string[];
  lastUpdated: number;
};

const NowPage: NextPage<NowPage> = ({ coverUrl, entries, lastUpdated }) => {
  return (
    <section className="max-w-screen-md px-6 mx-auto py-20 mb-14">
      <figure className="max-w-xs mb-10 rounded-lg overflow-hidden shadow-md">
        {coverUrl ? (
          <Image
            loading="lazy"
            src={coverUrl}
            placeholder="blur"
            blurDataURL="data:image/jpeg;base64,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"
            layout="responsive"
            width={700}
            height={475}
            alt="Cover img"
          />
        ) : null}
      </figure>
      <p className="mb-4">
        What I’m doing <span className="italic">now</span>
      </p>
      <ul className="list-disc list-inside">
        {entries?.map((entrie, index) => (
          <li key={`${entrie}-${index}`} className="mb-1  ">
            {entrie}
          </li>
        ))}
      </ul>
      <p className="mt-8">
        What is a{" "}
        <a href="https://nownownow.com/about" className="underline">
          “now page”
        </a>
        ?
      </p>
      <p className="text-sm text-right mt-8 text-gray-600 dark:text-gray-400">
        Last updated: {new Date(lastUpdated).toLocaleDateString()}
      </p>
    </section>
  );
};

export async function getStaticProps() {
  const data = await getNow();

  return { props: { ...data }, revalidate: 120 };
}

export default NowPage;
